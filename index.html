<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸€ä»½ç¥ç§˜ç¤¼ç‰©</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "å¾®è½¯é›…é»‘", sans-serif;
        }
        body {
            background: url("https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/rc_gen_image/a5eec282ef3b4c4caa6039752d2878e4.jpeg~tplv-a9rns2rl98-image_dld_watermark_1_5.png") center/cover no-repeat;
            min-height: 100vh;
            overflow: hidden;
            position: relative;
        }
        #messageContainer {
            position: relative;
            width: 100%;
            height: 100vh;
            overflow: hidden;
        }
        /* å¿«æ‰‹é£æ ¼å¼¹çª— */
        .message {
            position: absolute;
            padding: 8px 16px;
            border-radius: 18px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            color: #222;
            font-size: 14px;
            white-space: nowrap;
            opacity: 0;
            animation: fadeIn 0.3s ease-out forwards;
        }
        @keyframes fadeIn {
            100% { opacity: 1; }
        }
        /* å¤šè‰²æ¸å˜ */
        .msg-pink { background: linear-gradient(90deg, rgba(255,240,245,0.95), rgba(255,220,230,0.95)); }
        .msg-blue { background: linear-gradient(90deg, rgba(240,248,255,0.95), rgba(220,240,255,0.95)); }
        .msg-yellow { background: linear-gradient(90deg, rgba(255,250,240,0.95), rgba(255,245,220,0.95)); }
        .msg-purple { background: linear-gradient(90deg, rgba(245,240,255,0.95), rgba(230,220,255,0.95)); }
        /* æ ‡ç­¾æ ·å¼ */
        .msg-tag {
            font-size: 13px;
            color: #ff3a7c;
            font-weight: 600;
            margin-right: 5px;
        }
        .msg-heart {
            font-size: 12px;
            color: #ff3a7c;
            margin-right: 3px;
        }
        /* è£…é¥°å…ƒç´ æ ·å¼ */
        .decor {
            position: absolute;
            font-size: 16px;
            opacity: 0.8;
            animation: float 3s infinite alternate ease-in-out;
        }
        @keyframes float {
            0% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-8px) scale(1.1); }
            100% { transform: translateY(0) scale(1); }
        }
        /* ä¸­å¤®å¤§çˆ±å¿ƒæ ·å¼ */
        .center-heart {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            font-size: 120px;
            color: #ff3a7c;
            opacity: 0;
            z-index: 999;
            animation: heartBeat 0.8s ease-out forwards;
        }
        @keyframes heartBeat {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
            50% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }
        .restart-btn {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #fff;
            padding: 9px 18px;
            border-radius: 18px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
            color: #555;
            font-size: 13px;
            border: none;
            cursor: pointer;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <div id="messageContainer"></div>
    <button class="restart-btn" onclick="location.reload()">é‡æ–°å¼€å§‹</button>

    <script>
        window.onload = function() {
            // åŸå§‹æ–‡æ¡ˆåº“ + æ–°å¢10å¥æ¸©é¦¨æ–‡æ¡ˆ
            const originalMessages = [
                // åŸæœ‰å¥å­
                "ä¿æŒå¾®ç¬‘å‘€", "æˆ‘æƒ³ä½ äº†", "ä½ è¿‡å¾—å¼€å¿ƒå˜›",
                "å¥½å¥½çˆ±è‡ªå·±", "å¤©å†·äº†ï¼Œå¤šç©¿è¡£æœ", "ä»Šå¤©è¿‡å¾—å¼€å¿ƒå˜›",
                "å­¦ä¼šçˆ±è‡ªå·±ï¼Œæ‰èƒ½æ›´å¥½åœ°çˆ±åˆ«äºº", "çæƒœæ¯ä¸€åˆ»", "åˆ«å¤ªç´¯å•¦ï¼Œå¶å°”å·æ‡’ä¹Ÿå¥½",
                "å¤©å‡‰äº†ï¼Œè®°å¾—æ·»ä»¶è¡£æœï¼Œåˆ«å†»ç€è‡ªå·±ã€‚",
                "å·¥ä½œå†å¿™ï¼Œä¹Ÿå¾—æŒ‰æ—¶åƒé¥­ï¼Œåˆ«æŠŠèƒƒé¥¿åäº†ã€‚",
                "ç´¯äº†å°±æ­‡ä¼šå„¿ï¼Œåˆ«ç¡¬æ’‘ç€ï¼Œèº«ä½“æ˜¯è‡ªå·±çš„ã€‚",
                "æ™šä¸Šæ—©ç‚¹ç¡ï¼Œåˆ«ç†¬å¤œï¼Œç¬¬äºŒå¤©æ‰æœ‰ç²¾ç¥ã€‚",
                "å¿ƒé‡Œæœ‰å•¥ä¸ç—›å¿«ï¼Œå°±è·Ÿäººè¯´è¯´ï¼Œåˆ«éƒ½æ†‹åœ¨å¿ƒé‡Œã€‚",
                
                // æ–°å¢10ä¸ªå¥å­
                "é‡åˆ°å›°éš¾åˆ«æ”¾å¼ƒï¼Œæˆ‘ä¸€ç›´éƒ½åœ¨æ”¯æŒä½ ã€‚",
                "ä¸ç®¡å¤šå¿™ï¼Œéƒ½è¦ç•™ç‚¹æ—¶é—´ç»™è‡ªå·±æ”¾æ¾ã€‚",
                "è®°å¾—å¤šå–æ°´ï¼Œèº«ä½“æ°´æ¶¦æ¶¦çš„æ‰èˆ’æœã€‚",
                "ä¸å¼€å¿ƒçš„æ—¶å€™ï¼Œåƒç‚¹ç”œé£Ÿå¿ƒæƒ…ä¼šå˜å¥½å“¦ã€‚",
                "å‡ºé—¨è®°å¾—å¸¦ä¼ï¼Œåˆ«è¢«é›¨æ·‹åˆ°äº†ã€‚",
                "ä½ å€¼å¾—è¢«çˆ±ï¼Œä¹Ÿå€¼å¾—æ‹¥æœ‰æ‰€æœ‰ç¾å¥½çš„äº‹ç‰©ã€‚",
                "åˆ«å¤ªè‹›è´£è‡ªå·±ï¼Œä½ å·²ç»åšå¾—å¾ˆæ£’äº†ã€‚",
                "æœ‰ç©ºå¤šå‡ºå»èµ°èµ°ï¼Œçœ‹çœ‹å¤–é¢çš„ä¸–ç•Œã€‚",
                "ç»™å®¶é‡Œæ‰“ä¸ªç”µè¯å§ï¼Œå®¶äººä¹Ÿåœ¨æƒ³ä½ ã€‚",
                "æ— è®ºå‘ç”Ÿä»€ä¹ˆï¼Œè®°å¾—ä¿æŒä¸€é¢—ä¹è§‚çš„å¿ƒã€‚"
            ];

            const container = document.getElementById('messageContainer');
            let currentZIndex = 1;
            const padding = { left: 20, right: 40, top: 20, bottom: 100 };
            const colorClasses = ['msg-pink', 'msg-blue', 'msg-yellow', 'msg-purple'];
            const decors = ['ğŸ’–', 'â­', 'â¤ï¸', 'âœ¨', 'ğŸŒ¸', 'ğŸ’«'];

            // --- æ ¸å¿ƒé€»è¾‘1ï¼šå¥å­é‡å¤æ¬¡æ•°æ§åˆ¶ï¼ˆæ”¹ä¸º2æ¬¡ï¼‰ ---
            let messagePool = [];
            originalMessages.forEach(text => {
                // æ¯ä¸ªå¥å­æ”¾å…¥2æ¬¡ï¼ŒæŠ½å®Œå³æ­¢
                for(let i=0; i<2; i++) {
                    messagePool.push(text);
                }
            });
            // æ‰“ä¹±é¡ºåº
            messagePool = shuffleArray(messagePool);
            let isFinished = false; // æ˜¯å¦å‘å®Œæ‰€æœ‰å¥å­

            // --- æ ¸å¿ƒé€»è¾‘2ï¼šå…¨å±å‡åŒ€åˆ†å¸ƒï¼ˆç½‘æ ¼ç®—æ³•ï¼‰ ---
            const grid = { x: 3, y: 3 }; // 3x3 ç½‘æ ¼
            let lastGridPos = { x: -1, y: -1 }; // ä¸Šä¸€æ¬¡çš„ç½‘æ ¼ä½ç½®

            function createMessage() {
                if(isFinished) return;

                // 1. è·å–å¥å­ï¼ˆå¦‚æœæ± ä¸ºç©ºåˆ™åœæ­¢ï¼‰
                if(messagePool.length === 0) {
                    isFinished = true;
                    showCenterHeart(); // æ˜¾ç¤ºä¸­å¤®çˆ±å¿ƒ
                    return;
                }
                const randomText = messagePool.pop(); // ä»æ± ä¸­å–å‡º

                const msg = document.createElement('div');
                msg.classList.add('message');
                msg.classList.add(colorClasses[Math.floor(Math.random() * colorClasses.length)]);
                
                if (Math.random() > 0.1) {
                    msg.innerHTML = `<span class="msg-heart">ğŸ’–</span><span class="msg-tag">æç¤º</span>${randomText}`;
                } else {
                    msg.innerText = randomText;
                }

                // 2. åŠ¨æ€è®¡ç®—å®½åº¦ï¼ˆé˜²è¶…å±æ ¸å¿ƒï¼‰
                msg.style.position = 'fixed';
                msg.style.visibility = 'hidden';
                container.appendChild(msg);
                const msgWidth = msg.offsetWidth;
                const msgHeight = msg.offsetHeight;
                container.removeChild(msg);
                msg.style.position = 'absolute';
                msg.style.visibility = 'visible';

                // 3. å…¨å±å‡åŒ€åˆ†å¸ƒé€»è¾‘ï¼ˆé¿å…é›†ä¸­ï¼‰
                let gridX, gridY;
                // ç¡®ä¿è¿™æ¬¡çš„ç½‘æ ¼å’Œä¸Šæ¬¡ä¸ä¸€æ ·
                do {
                    gridX = Math.floor(Math.random() * grid.x);
                    gridY = Math.floor(Math.random() * grid.y);
                } while (gridX === lastGridPos.x && gridY === lastGridPos.y);
                lastGridPos = { x: gridX, y: gridY };

                // è®¡ç®—å½“å‰ç½‘æ ¼çš„åƒç´ èŒƒå›´
                const gridWidth = (window.innerWidth - padding.left - padding.right) / grid.x;
                const gridHeight = (window.innerHeight - padding.top - padding.bottom) / grid.y;
                const gridLeft = padding.left + gridX * gridWidth;
                const gridTop = padding.top + gridY * gridHeight;

                // åœ¨ç½‘æ ¼èŒƒå›´å†…éšæœºå®šä½
                const maxLeftInGrid = gridLeft + gridWidth - msgWidth;
                const maxTopInGrid = gridTop + gridHeight - msgHeight;
                const randomLeft = gridLeft + Math.random() * (maxLeftInGrid - gridLeft);
                const randomTop = gridTop + Math.random() * (maxTopInGrid - gridTop);

                // æœ€ç»ˆä½ç½®
                msg.style.left = `${randomLeft}px`;
                msg.style.top = `${randomTop}px`;
                msg.style.zIndex = currentZIndex++;

                container.appendChild(msg);

                // 4. ç”Ÿæˆè£…é¥°å“
                if (Math.random() > 0.3) {
                    createDecor(randomLeft, randomTop, msgWidth, msgHeight);
                }

                // 5. æ§åˆ¶æ€»æ•°é‡
                if (currentZIndex > 120) {
                    const oldestMsg = container.querySelector('.message');
                    if (oldestMsg) oldestMsg.remove();
                    const oldestDecor = container.querySelector('.decor');
                    if (oldestDecor) oldestDecor.remove();
                }
            }

            // åˆ›å»ºè£…é¥°å“
            function createDecor(baseLeft, baseTop, msgWidth, msgHeight) {
                const decor = document.createElement('div');
                decor.classList.add('decor');
                decor.innerText = decors[Math.floor(Math.random() * decors.length)];
                const decorSize = 20;

                const decorMaxLeft = window.innerWidth - decorSize - padding.right;
                const decorMaxTop = window.innerHeight - decorSize - padding.bottom;

                const randomOffsetX = (Math.random() - 0.5) * 100;
                const randomOffsetY = (Math.random() - 0.5) * 100;
                
                let decorLeft = baseLeft + msgWidth/2 + randomOffsetX - decorSize/2;
                let decorTop = baseTop + msgHeight/2 + randomOffsetY - decorSize/2;

                decorLeft = Math.max(padding.left, Math.min(decorLeft, decorMaxLeft));
                decorTop = Math.max(padding.top, Math.min(decorTop, decorMaxTop));

                decor.style.left = `${decorLeft}px`;
                decor.style.top = `${decorTop}px`;
                decor.style.zIndex = currentZIndex++;

                container.appendChild(decor);

                setTimeout(() => {
                    decor.style.opacity = '0';
                    decor.style.transition = 'opacity 0.5s ease';
                    setTimeout(() => decor.remove(), 500);
                }, 3000 + Math.random() * 2000);
            }

            // æ˜¾ç¤ºä¸­å¤®å¤§çˆ±å¿ƒ
            function showCenterHeart() {
                const heart = document.createElement('div');
                heart.classList.add('center-heart');
                heart.innerText = 'ğŸ’–';
                document.body.appendChild(heart);
            }

            // å·¥å…·å‡½æ•°ï¼šæ‰“ä¹±æ•°ç»„
            function shuffleArray(array) {
                let currentIndex = array.length,  randomIndex;
                while (currentIndex != 0) {
                    randomIndex = Math.floor(Math.random() * currentIndex);
                    currentIndex--;
                    [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
                }
                return array;
            }

            // å¯åŠ¨ç”Ÿæˆ
            const interval = setInterval(createMessage, 600);
            // åˆå§‹ç”Ÿæˆ
            for (let i = 0; i < 20; i++) {
                setTimeout(createMessage, i * 150);
            }
        }
    </script>
</body>
</html>
